<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Contable - Educonta</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/accounting-dashboard.css">
    <link rel="stylesheet" href="css/dashboard-contable.css">
    <link rel="stylesheet" href="css/modals-alerts.css">
</head>

<body>
    <div class="bg-animation"></div>

    <header class="header">
        <nav class="nav">
            <a href="/dashboard.html" class="logo">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z" />
                </svg>
                Educonta
            </a>
            <div class="nav-actions">
                <div class="theme-toggle-container">
                    <span class="theme-label" id="light-label">CLARO</span>
                    <button class="theme-toggle"></button>
                    <span class="theme-label" id="dark-label">OSCURO</span>
                </div>
                <div class="user-info" id="user-info">
                    <!-- User info will be populated by JavaScript -->
                </div>
                <button class="btn btn-secondary" onclick="logout()">
                    <svg width="16" height="16" fill="currentColor">
                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4m6 14l6-6-6-6m6 6H9" />
                    </svg>
                    Cerrar Sesión
                </button>
            </div>
        </nav>
    </header>

    <main class="main">
        <div class="page-header">
            <div>
                <h1 class="page-title">Dashboard Contable</h1>
                <p class="page-subtitle">Gestión contable y financiera detallada</p>
            </div>
            <div class="page-actions">
                <button class="btn btn-primary" onclick="createTransaction()">
                    <svg width="16" height="16" fill="currentColor">
                        <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                    </svg>
                    Nueva Transacción
                </button>
                <button class="btn btn-secondary" onclick="generateReport()">
                    <svg width="16" height="16" fill="currentColor">
                        <path
                            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    Generar Reporte
                </button>
            </div>
        </div>

        <!-- Alert -->
        <div class="alert" id="alert">
            <div class="alert-content">
                <span class="alert-message" id="alert-message"></span>
                <button class="alert-close" onclick="hideAlert()">×</button>
            </div>
        </div>

        <!-- Métricas Contables -->
        <div class="metrics-grid">
            <div class="metric-card primary">
                <div class="metric-icon">
                    <svg width="24" height="24" fill="currentColor">
                        <path d="M9 17v-2m3 2v-4m3 4v-6M9 3L5 7l4 4 4-4-4-4z" />
                    </svg>
                </div>
                <div class="metric-content">
                    <div class="metric-value" id="total-accounts">0</div>
                    <div class="metric-label">Cuentas Contables</div>
                    <div class="metric-change" id="accounts-change">0 activas</div>
                </div>
            </div>

            <div class="metric-card success">
                <div class="metric-icon">
                    <svg width="24" height="24" fill="currentColor">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div class="metric-content">
                    <div class="metric-value" id="approved-transactions">0</div>
                    <div class="metric-label">Transacciones Aprobadas</div>
                    <div class="metric-change positive" id="approved-change">Este mes</div>
                </div>
            </div>

            <div class="metric-card warning">
                <div class="metric-icon">
                    <svg width="24" height="24" fill="currentColor">
                        <path d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div class="metric-content">
                    <div class="metric-value" id="pending-transactions">0</div>
                    <div class="metric-label">Transacciones Pendientes</div>
                    <div class="metric-change" id="pending-change">Por revisar</div>
                </div>
            </div>

            <div class="metric-card info">
                <div class="metric-icon">
                    <svg width="24" height="24" fill="currentColor">
                        <path
                            d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16l-3-3m3 3l3-3" />
                    </svg>
                </div>
                <div class="metric-content">
                    <div class="metric-value" id="balance-status">✓</div>
                    <div class="metric-label">Balance Contable</div>
                    <div class="metric-change positive" id="balance-change">Cuadrado</div>
                </div>
            </div>
        </div>

        <!-- Panel de Trabajo -->
        <div class="dashboard-grid">
            <!-- Transacciones Recientes -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>Transacciones Recientes</h3>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-secondary" onclick="viewAllTransactions()">
                            <svg width="16" height="16" fill="currentColor">
                                <path d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                            Ver Todas
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="transactions-list" id="recent-transactions">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Balance de Comprobación -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>Balance de Comprobación</h3>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-primary" onclick="generateTrialBalance()">
                            <svg width="16" height="16" fill="currentColor">
                                <path
                                    d="M12 2l3.09 6.26L22 9l-5 4.87L18.18 21 12 17.77 5.82 21 7 13.87 2 9l6.91-.74L12 2z" />
                            </svg>
                            Generar PDF
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="balance-summary">
                        <div class="balance-item">
                            <span class="balance-label">Total Débitos</span>
                            <span class="balance-value" id="total-debits">$0</span>
                        </div>
                        <div class="balance-item">
                            <span class="balance-label">Total Créditos</span>
                            <span class="balance-value" id="total-credits">$0</span>
                        </div>
                        <div class="balance-item highlight">
                            <span class="balance-label">Diferencia</span>
                            <span class="balance-value" id="balance-difference">$0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cuentas por Tipo -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>Distribución de Cuentas</h3>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-secondary" onclick="manageAccounts()">
                            <svg width="16" height="16" fill="currentColor">
                                <path
                                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            Gestionar
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="accounts-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Flujo de Caja -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>Flujo de Caja</h3>
                    <div class="card-actions">
                        <select class="form-input" id="cashflow-period">
                            <option value="week">Última semana</option>
                            <option value="month" selected>Último mes</option>
                            <option value="quarter">Último trimestre</option>
                        </select>
                    </div>
                </div>
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="cashflow-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Categorías Más Utilizadas -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>Categorías Más Utilizadas</h3>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-secondary" onclick="manageCategories()">
                            <svg width="16" height="16" fill="currentColor">
                                <path
                                    d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                            </svg>
                            Gestionar
                        </button>
                    </div>
                </div>
                <div class="card-content">
                    <div class="categories-list" id="top-categories">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Tareas Pendientes -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3>Tareas Pendientes</h3>
                    <div class="card-actions">
                        <span class="notification-badge" id="tasks-count">0</span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="tasks-list" id="pending-tasks">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Herramientas Contables -->
        <div class="tools-section">
            <h3>Herramientas Contables</h3>
            <div class="tools-grid">
                <div class="tool-card" onclick="openAccountingTool('accounts')">
                    <div class="tool-icon">
                        <svg width="24" height="24" fill="currentColor">
                            <path d="M9 17v-2m3 2v-4m3 4v-6M9 3L5 7l4 4 4-4-4-4z" />
                        </svg>
                    </div>
                    <div class="tool-content">
                        <h4>Plan de Cuentas</h4>
                        <p>Gestionar cuentas contables</p>
                    </div>
                </div>

                <div class="tool-card" onclick="openAccountingTool('transactions')">
                    <div class="tool-icon">
                        <svg width="24" height="24" fill="currentColor">
                            <path d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                        </svg>
                    </div>
                    <div class="tool-content">
                        <h4>Transacciones</h4>
                        <p>Registrar movimientos contables</p>
                    </div>
                </div>

                <div class="tool-card" onclick="openAccountingTool('reports')">
                    <div class="tool-icon">
                        <svg width="24" height="24" fill="currentColor">
                            <path
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <div class="tool-content">
                        <h4>Reportes</h4>
                        <p>Generar estados financieros</p>
                    </div>
                </div>

                <div class="tool-card" onclick="openAccountingTool('categories')">
                    <div class="tool-icon">
                        <svg width="24" height="24" fill="currentColor">
                            <path
                                d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                        </svg>
                    </div>
                    <div class="tool-content">
                        <h4>Categorías</h4>
                        <p>Organizar clasificaciones</p>
                    </div>
                </div>

                <div class="tool-card" onclick="openAccountingTool('validation')">
                    <div class="tool-icon">
                        <svg width="24" height="24" fill="currentColor">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div class="tool-content">
                        <h4>Validación</h4>
                        <p>Verificar partida doble</p>
                    </div>
                </div>

                <div class="tool-card" onclick="openAccountingTool('backup')">
                    <div class="tool-icon">
                        <svg width="24" height="24" fill="currentColor">
                            <path
                                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
                        </svg>
                    </div>
                    <div class="tool-content">
                        <h4>Respaldo</h4>
                        <p>Exportar datos contables</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/dashboard-contable.js"></script>
</body>

</html>