<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Correcci√≥n Modales</title>
    <link rel="stylesheet" href="public/css/accounting-dashboard.css">
    <link rel="stylesheet" href="public/css/student-modals.css">
    <link rel="stylesheet" href="public/css/dark-theme-tables.css">
    <link rel="stylesheet" href="public/css/dark-theme-forms.css">
    <link rel="stylesheet" href="public/css/dark-theme-modals.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Inter', sans-serif;
            background: var(--bg-secondary);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 2rem;
            padding: 2rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            background: var(--card-bg);
            box-shadow: var(--shadow-md);
        }
        
        .test-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .theme-toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
        }
        
        .problem-indicator {
            background: var(--error-bg);
            color: var(--error-text);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--error-border);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .fix-indicator {
            background: var(--success-bg);
            color: var(--success-text);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--success-border);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body data-theme="dark">
    <button class="btn btn-primary theme-toggle-btn" onclick="toggleTheme()">
        üåì Cambiar Tema
    </button>
    
    <div class="test-container">
        <h1 style="text-align: center; color: var(--text-primary); margin-bottom: 2rem;">
            üîß Test Correcci√≥n de Modales
        </h1>
        
        <!-- Problemas Identificados -->
        <div class="test-section">
            <h2 class="test-title">‚ùå Problemas Identificados</h2>
            <div class="problem-indicator">
                <strong>1. Modal Ver:</strong> No se adapta al tema oscuro, mantiene fondo blanco
            </div>
            <div class="problem-indicator">
                <strong>2. Modal Editar:</strong> Texto cortado por la mitad en los recuadros
            </div>
            <div class="problem-indicator">
                <strong>3. Selects:</strong> Flechas duplicadas (nativa + CSS)
            </div>
        </div>
        
        <!-- Correcciones Aplicadas -->
        <div class="test-section">
            <h2 class="test-title">‚úÖ Correcciones Aplicadas</h2>
            <div class="fix-indicator">
                <strong>1. Forzado de estilos:</strong> Uso de !important para sobrescribir estilos existentes
            </div>
            <div class="fix-indicator">
                <strong>2. Altura de l√≠nea:</strong> line-height: 1.6 y min-height: 40px para evitar texto cortado
            </div>
            <div class="fix-indicator">
                <strong>3. Selects limpios:</strong> appearance: none y una sola flecha SVG
            </div>
        </div>
        
        <!-- Botones de Prueba -->
        <div class="test-section">
            <h2 class="test-title">üß™ Probar Modales Corregidos</h2>
            <div class="buttons-grid">
                <button class="btn btn-info" onclick="showViewModal()">
                    üëÅÔ∏è Modal Ver (Corregido)
                </button>
                <button class="btn btn-warning" onclick="showEditModal()">
                    ‚úèÔ∏è Modal Editar (Corregido)
                </button>
                <button class="btn btn-success" onclick="showFormModal()">
                    üìù Modal Formulario
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL VER ESTUDIANTE CORREGIDO -->
    <div id="viewModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2>üëÅÔ∏è Detalles del Estudiante</h2>
                <button class="modal-close" onclick="closeModal('viewModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Perfil del estudiante -->
                <div class="student-profile">
                    <div class="profile-avatar">FA</div>
                    <div class="profile-info">
                        <h3>FERIA GIL ANGY LORENA</h3>
                        <p>10¬∞ - Curso 01</p>
                    </div>
                </div>
                
                <!-- Grid de detalles -->
                <div class="details-grid">
                    <div class="detail-section">
                        <h4>üìã Informaci√≥n Personal</h4>
                        <div class="detail-item">
                            <label>Documento:</label>
                            <span>TI: 1048872859</span>
                        </div>
                        <div class="detail-item">
                            <label>Email:</label>
                            <span>aferia2859e@villasanpablo.edu.co</span>
                        </div>
                        <div class="detail-item">
                            <label>Tel√©fono:</label>
                            <span>+57 300 000 0000</span>
                        </div>
                        <div class="detail-item">
                            <label>Direcci√≥n:</label>
                            <span>Direcci√≥n pendiente</span>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Informaci√≥n del Acudiente</h4>
                        <div class="detail-item">
                            <label>Nombre:</label>
                            <span>Acudiente pendiente</span>
                        </div>
                        <div class="detail-item">
                            <label>Tel√©fono:</label>
                            <span>Pendiente</span>
                        </div>
                        <div class="detail-item">
                            <label>Email:</label>
                            <span>Pendiente</span>
                        </div>
                        <div class="detail-item">
                            <label>Relaci√≥n:</label>
                            <span>Pendiente</span>
                        </div>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h4>üí∞ Informaci√≥n Financiera</h4>
                    <div class="detail-item">
                        <label>Deuda Total:</label>
                        <span class="amount-negative">$150,000</span>
                    </div>
                    <div class="detail-item">
                        <label>Total Pagado:</label>
                        <span class="amount-positive">$350,000</span>
                    </div>
                    <div class="detail-item">
                        <label>√öltimo Pago:</label>
                        <span>15/01/2025</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('viewModal')">Cerrar</button>
                <button class="btn btn-primary" onclick="showEditModal(); closeModal('viewModal')">‚úèÔ∏è Editar</button>
            </div>
        </div>
    </div>

    <!-- MODAL EDITAR ESTUDIANTE CORREGIDO -->
    <div id="editModal" class="modal-overlay" style="display: none;">
        <div class="modal-container large">
            <div class="modal-header">
                <h2>‚úèÔ∏è Editar Estudiante</h2>
                <button class="modal-close" onclick="closeModal('editModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form class="student-form">
                    <div class="details-grid">
                        <div class="form-group">
                            <label>Nombres:</label>
                            <input type="text" value="FERIA GIL" required>
                        </div>
                        <div class="form-group">
                            <label>Apellidos:</label>
                            <input type="text" value="ANGY LORENA" required>
                        </div>
                    </div>
                    
                    <div class="details-grid">
                        <div class="form-group">
                            <label>Tipo Documento:</label>
                            <select required>
                                <option value="TI" selected>Tarjeta de Identidad</option>
                                <option value="CC">C√©dula de Ciudadan√≠a</option>
                                <option value="CE">C√©dula de Extranjer√≠a</option>
                                <option value="PP">Pasaporte</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>N√∫mero Documento:</label>
                            <input type="text" value="1048872859" required>
                        </div>
                    </div>
                    
                    <div class="details-grid">
                        <div class="form-group">
                            <label>Grado:</label>
                            <select required>
                                <option value="">Seleccionar grado</option>
                                <option value="6">6¬∞ (Sexto)</option>
                                <option value="7">7¬∞ (S√©ptimo)</option>
                                <option value="8">8¬∞ (Octavo)</option>
                                <option value="9">9¬∞ (Noveno)</option>
                                <option value="10" selected>10¬∞ (D√©cimo)</option>
                                <option value="11">11¬∞ (Und√©cimo)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Curso:</label>
                            <select required>
                                <option value="">Seleccionar curso</option>
                                <option value="01" selected>Curso 01</option>
                                <option value="02">Curso 02</option>
                                <option value="03">Curso 03</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="details-grid">
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" value="aferia2859e@villasanpablo.edu.co">
                        </div>
                        <div class="form-group">
                            <label>Tel√©fono:</label>
                            <input type="tel" value="+57 300 000 0000">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Observaciones:</label>
                        <textarea placeholder="Notas adicionales sobre el estudiante..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveStudent()">üíæ Guardar Cambios</button>
            </div>
        </div>
    </div>

    <!-- MODAL FORMULARIO SIMPLE -->
    <div id="formModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2>üìù Formulario de Prueba</h2>
                <button class="modal-close" onclick="closeModal('formModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form class="student-form">
                    <div class="form-group">
                        <label>Campo de Texto:</label>
                        <input type="text" placeholder="Escribe algo aqu√≠...">
                    </div>
                    <div class="form-group">
                        <label>Select con Flecha √önica:</label>
                        <select>
                            <option value="">Seleccionar opci√≥n...</option>
                            <option value="1">Opci√≥n 1</option>
                            <option value="2">Opci√≥n 2</option>
                            <option value="3">Opci√≥n 3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>√Årea de Texto:</label>
                        <textarea placeholder="Escribe un comentario..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('formModal')">Cancelar</button>
                <button class="btn btn-primary">Guardar</button>
            </div>
        </div>
    </div>

    <script>
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            document.body.setAttribute('data-theme', newTheme);
            
            localStorage.setItem('theme', newTheme);
            console.log(`üé® Tema cambiado a: ${newTheme}`);
        }
        
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function showViewModal() {
            showModal('viewModal');
        }
        
        function showEditModal() {
            showModal('editModal');
        }
        
        function showFormModal() {
            showModal('formModal');
        }
        
        function saveStudent() {
            alert('‚úÖ Estudiante guardado correctamente');
            closeModal('editModal');
        }
        
        // Cerrar modal al hacer clic fuera
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
        
        // Cerrar modal con ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modals = document.querySelectorAll('.modal-overlay');
                modals.forEach(modal => {
                    if (modal.style.display === 'flex') {
                        modal.style.display = 'none';
                    }
                });
                document.body.style.overflow = 'auto';
            }
        });
        
        // Inicializar tema
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.body.setAttribute('data-theme', savedTheme);
            
            console.log('‚úÖ Test de correcci√≥n de modales inicializado');
        });
    </script>
</body>
</html>